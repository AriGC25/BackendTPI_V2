{
  "info": {
    "name": "Sistema Transporte - Endpoints Verificados",
    "description": "ColecciÃ³n completa de endpoints funcionales probados paso a paso para CLIENTE y OPERADOR",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "paso-a-paso-2025"
  },
  "item": [
    {
      "name": "ðŸ” AUTENTICACIÃ“N",
      "item": [
        {
          "name": "Login Cliente",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token_cliente', jsonData.access_token);",
                  "    console.log('âœ“ Token de cliente guardado');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "client_id",
                  "value": "backend-client",
                  "type": "text"
                },
                {
                  "key": "client_secret",
                  "value": "backend-client-secret",
                  "type": "text"
                },
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "cliente1",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "cliente123",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{keycloak_url}}/realms/transportista-realm/protocol/openid-connect/token",
              "host": ["{{keycloak_url}}"],
              "path": ["realms", "transportista-realm", "protocol", "openid-connect", "token"]
            },
            "description": "AutenticaciÃ³n de usuario con rol CLIENTE. El token se guarda automÃ¡ticamente."
          },
          "response": []
        },
        {
          "name": "Login Operador",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token_operador', jsonData.access_token);",
                  "    console.log('âœ“ Token de operador guardado');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "client_id",
                  "value": "backend-client",
                  "type": "text"
                },
                {
                  "key": "client_secret",
                  "value": "backend-client-secret",
                  "type": "text"
                },
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "operador1",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "operador123",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{keycloak_url}}/realms/transportista-realm/protocol/openid-connect/token",
              "host": ["{{keycloak_url}}"],
              "path": ["realms", "transportista-realm", "protocol", "openid-connect", "token"]
            },
            "description": "AutenticaciÃ³n de usuario con rol OPERADOR. El token se guarda automÃ¡ticamente."
          },
          "response": []
        },
        {
          "name": "Login Transportista",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token_transportista', jsonData.access_token);",
                  "    console.log('âœ“ Token de transportista guardado');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "client_id",
                  "value": "backend-client",
                  "type": "text"
                },
                {
                  "key": "client_secret",
                  "value": "backend-client-secret",
                  "type": "text"
                },
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "transportista1",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "transportista123",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{keycloak_url}}/realms/transportista-realm/protocol/openid-connect/token",
              "host": ["{{keycloak_url}}"],
              "path": ["realms", "transportista-realm", "protocol", "openid-connect", "token"]
            },
            "description": "AutenticaciÃ³n de usuario con rol TRANSPORTISTA. El token se guarda automÃ¡ticamente."
          },
          "response": []
        }
      ],
      "description": "Endpoints de autenticaciÃ³n para los tres roles del sistema"
    },
    {
      "name": "ðŸ‘¤ CLIENTE - Funcionalidades Completas",
      "item": [
        {
          "name": "1. Registrar Cliente",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('cliente_id', jsonData.id);",
                  "    console.log('âœ“ Cliente creado con ID: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_cliente}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Juan\",\n  \"apellido\": \"PÃ©rez\",\n  \"dni\": \"12345678\",\n  \"domicilio\": \"Av. Corrientes 1234, CABA\",\n  \"telefono\": \"11-5555-1234\",\n  \"email\": \"juan.perez@email.com\"\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/clientes",
              "host": ["{{gateway_url}}"],
              "path": ["clientes"]
            },
            "description": "âœ… VERIFICADO\nRegistra un nuevo cliente. Guarda automÃ¡ticamente el cliente_id."
          },
          "response": []
        },
        {
          "name": "2. Crear Solicitud de Transporte",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('solicitud_id', jsonData.id);",
                  "    pm.collectionVariables.set('contenedor_id', jsonData.contenedorId);",
                  "    pm.collectionVariables.set('numero_solicitud', jsonData.numeroSolicitud);",
                  "    console.log('âœ“ Solicitud: ' + jsonData.numeroSolicitud);",
                  "    console.log('âœ“ Contenedor ID: ' + jsonData.contenedorId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_cliente}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": {{cliente_id}},\n  \"pesoContenedor\": 18500.75,\n  \"volumenContenedor\": 45.5,\n  \"descripcionContenedor\": \"Equipos electronicos sensibles - Refrigerado\",\n  \"direccionOrigen\": \"Av. Corrientes 1000, Buenos Aires\",\n  \"latitudOrigen\": -34.6037,\n  \"longitudOrigen\": -58.3816,\n  \"direccionDestino\": \"Av. Libertador 5000, Buenos Aires\",\n  \"latitudDestino\": -34.5601,\n  \"longitudDestino\": -58.4558\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/solicitudes",
              "host": ["{{gateway_url}}"],
              "path": ["solicitudes"]
            },
            "description": "âœ… VERIFICADO\nCrea solicitud con contenedor. Estado inicial: PENDIENTE"
          },
          "response": []
        },
        {
          "name": "3. Consultar Costo y Tiempo Estimado",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ Costo: $' + jsonData.costoTotal + ' ' + jsonData.moneda);",
                  "    console.log('âœ“ Tiempo: ' + jsonData.tiempoEstimadoHoras + ' horas');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_cliente}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/solicitudes/{{solicitud_id}}/costo",
              "host": ["{{gateway_url}}"],
              "path": ["solicitudes", "{{solicitud_id}}", "costo"]
            },
            "description": "âœ… VERIFICADO\nCalcula costo total considerando: distancia, combustible, peso, volumen y estadÃ­as"
          },
          "response": []
        },
        {
          "name": "4. Consultar Tracking del Contenedor",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_cliente}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tracking/contenedor/{{contenedor_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["tracking", "contenedor", "{{contenedor_id}}"]
            },
            "description": "âœ… VERIFICADO\nObtiene historial de eventos del contenedor"
          },
          "response": []
        },
        {
          "name": "5. Consultar Solicitudes del Cliente",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_cliente}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/solicitudes/cliente/{{cliente_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["solicitudes", "cliente", "{{cliente_id}}"]
            },
            "description": "âœ… VERIFICADO\nLista todas las solicitudes de un cliente"
          },
          "response": []
        }
      ],
      "description": "Funcionalidades completas del rol CLIENTE - Todas verificadas âœ…"
    },
    {
      "name": "âš™ï¸ OPERADOR - GestiÃ³n de Rutas y Tramos",
      "item": [
        {
          "name": "1. Consultar Rutas Tentativas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ Opciones de rutas: ' + jsonData.length);",
                  "    if (jsonData.length > 0) {",
                  "        pm.collectionVariables.set('ruta_tentativa', JSON.stringify(jsonData[0]));",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/rutas/tentativas/{{solicitud_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["rutas", "tentativas", "{{solicitud_id}}"]
            },
            "description": "âœ… VERIFICADO\nGenera mÃºltiples opciones de rutas con estimaciones:\n- Ruta directa (origen â†’ destino)\n- Ruta con depÃ³sito intermedio\n\nCalcula para cada opciÃ³n:\nâœ“ Distancia total (km)\nâœ“ Costo estimado (ARS)\nâœ“ Tiempo estimado (horas)\nâœ“ Todos los tramos con coordenadas"
          },
          "response": []
        },
        {
          "name": "2. Asignar Ruta a Solicitud",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('ruta_id', jsonData.id);",
                  "    console.log('âœ“ Ruta asignada con ID: ' + jsonData.id);",
                  "    console.log('âœ“ Tramos creados: ' + jsonData.cantidadTramos);",
                  "    if (jsonData.tramos && jsonData.tramos.length > 0) {",
                  "        pm.collectionVariables.set('tramo_id', jsonData.tramos[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{{ruta_tentativa}}"
            },
            "url": {
              "raw": "{{gateway_url}}/rutas/asignar/{{solicitud_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["rutas", "asignar", "{{solicitud_id}}"]
            },
            "description": "âœ… VERIFICADO\nAsigna una ruta definitiva con todos sus tramos.\n\nEfectos:\nâœ“ Guarda la ruta en la BD\nâœ“ Crea todos los tramos asociados\nâœ“ Cambia estado de solicitud a: RUTA_ASIGNADA\nâœ“ Guarda automÃ¡ticamente el tramo_id del primer tramo"
          },
          "response": []
        },
        {
          "name": "3. Consultar Ruta Asignada",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/rutas/solicitud/{{solicitud_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["rutas", "solicitud", "{{solicitud_id}}"]
            },
            "description": "âœ… VERIFICADO\nObtiene la ruta asignada a una solicitud con todos sus tramos"
          },
          "response": []
        },
        {
          "name": "4. Asignar CamiÃ³n a Tramo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ CamiÃ³n asignado al tramo');",
                  "    console.log('âœ“ Estado: ' + jsonData.estado);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/{{tramo_id}}/asignar-camion?camionId=1&transportistaId=transportista1",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "{{tramo_id}}", "asignar-camion"],
              "query": [
                {
                  "key": "camionId",
                  "value": "1"
                },
                {
                  "key": "transportistaId",
                  "value": "transportista1"
                }
              ]
            },
            "description": "âœ… NUEVO ENDPOINT\nAsigna un camiÃ³n a un tramo de transporte.\n\nValidaciones automÃ¡ticas:\nâœ“ Verifica que el tramo estÃ© en estado PENDIENTE\nâœ“ Valida capacidad de peso del camiÃ³n vs contenedor\nâœ“ Valida capacidad de volumen del camiÃ³n vs contenedor\nâœ“ Consulta automÃ¡ticamente al servicio de logÃ­stica\n\nEfectos:\nâœ“ Asigna camionId y transportistaId al tramo\nâœ“ Cambia estado del tramo a: ASIGNADO"
          },
          "response": []
        },
        {
          "name": "5. Listar Todos los Tramos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos",
              "host": ["{{gateway_url}}"],
              "path": ["tramos"]
            },
            "description": "Lista todos los tramos del sistema (solo OPERADOR)"
          },
          "response": []
        },
        {
          "name": "6. Obtener Tramo por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/{{tramo_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "{{tramo_id}}"]
            },
            "description": "Obtiene detalles de un tramo especÃ­fico"
          },
          "response": []
        },
        {
          "name": "7. Listar Solicitudes (todas)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/solicitudes",
              "host": ["{{gateway_url}}"],
              "path": ["solicitudes"]
            },
            "description": "Lista todas las solicitudes del sistema (solo OPERADOR)"
          },
          "response": []
        },
        {
          "name": "8. Filtrar Solicitudes por Estado",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/solicitudes/estado/PENDIENTE",
              "host": ["{{gateway_url}}"],
              "path": ["solicitudes", "estado", "PENDIENTE"]
            },
            "description": "Filtra solicitudes por estado.\n\nEstados vÃ¡lidos:\n- PENDIENTE\n- RUTA_ASIGNADA\n- EN_PROCESO\n- COMPLETADA\n- CANCELADA"
          },
          "response": []
        }
      ],
      "description": "Funcionalidades completas del rol OPERADOR - GestiÃ³n de rutas y asignaciÃ³n de recursos"
    },
    {
      "name": "ðŸ¢ OPERADOR - GestiÃ³n de DepÃ³sitos",
      "item": [
        {
          "name": "1. Crear DepÃ³sito",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('deposito_id', jsonData.id);",
                  "    console.log('âœ“ DepÃ³sito creado con ID: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"DepÃ³sito Central CABA\",\n  \"direccion\": \"Av. del Libertador 1000, CABA\",\n  \"latitud\": -34.5875,\n  \"longitud\": -58.4189,\n  \"capacidadMaxima\": 50000.0,\n  \"activo\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/depositos",
              "host": ["{{gateway_url}}"],
              "path": ["depositos"]
            },
            "description": "âœ… VERIFICADO\nCrea un nuevo depÃ³sito en el sistema.\n\nCampos requeridos:\nâœ“ nombre: Nombre del depÃ³sito\nâœ“ direccion: DirecciÃ³n completa\nâœ“ latitud y longitud: Coordenadas GPS\nâœ“ capacidadMaxima: Capacidad en kg\nâœ“ activo: true/false"
          },
          "response": []
        },
        {
          "name": "2. Listar Todos los DepÃ³sitos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/depositos",
              "host": ["{{gateway_url}}"],
              "path": ["depositos"]
            },
            "description": "âœ… VERIFICADO\nObtiene lista completa de depÃ³sitos del sistema"
          },
          "response": []
        },
        {
          "name": "3. Listar DepÃ³sitos Activos",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/depositos/activos",
              "host": ["{{gateway_url}}"],
              "path": ["depositos", "activos"]
            },
            "description": "âœ… VERIFICADO\nObtiene solo los depÃ³sitos activos (disponibles para asignar rutas)"
          },
          "response": []
        },
        {
          "name": "4. Obtener DepÃ³sito por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/depositos/{{deposito_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["depositos", "{{deposito_id}}"]
            },
            "description": "âœ… VERIFICADO\nObtiene detalles de un depÃ³sito especÃ­fico"
          },
          "response": []
        },
        {
          "name": "5. Actualizar DepÃ³sito",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"DepÃ³sito Central CABA - Actualizado\",\n  \"direccion\": \"Av. del Libertador 1000, CABA\",\n  \"latitud\": -34.5875,\n  \"longitud\": -58.4189,\n  \"capacidadMaxima\": 60000.0,\n  \"activo\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/depositos/{{deposito_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["depositos", "{{deposito_id}}"]
            },
            "description": "âœ… VERIFICADO\nActualiza los datos de un depÃ³sito existente"
          },
          "response": []
        },
        {
          "name": "6. Eliminar DepÃ³sito",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/depositos/{{deposito_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["depositos", "{{deposito_id}}"]
            },
            "description": "âœ… VERIFICADO\nElimina un depÃ³sito del sistema (solo si no estÃ¡ en uso)"
          },
          "response": []
        }
      ],
      "description": "GestiÃ³n completa de depÃ³sitos - Solo OPERADOR"
    },
    {
      "name": "ðŸš› OPERADOR - GestiÃ³n de Camiones",
      "item": [
        {
          "name": "1. Crear CamiÃ³n",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('camion_id', jsonData.id);",
                  "    console.log('âœ“ CamiÃ³n creado con ID: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patente\": \"AB123CD\",\n  \"modelo\": \"Mercedes-Benz Actros 2651\",\n  \"capacidadPeso\": 25000.0,\n  \"capacidadVolumen\": 80.0,\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/camiones",
              "host": ["{{gateway_url}}"],
              "path": ["camiones"]
            },
            "description": "âœ… VERIFICADO\nCrea un nuevo camiÃ³n en el sistema.\n\nCampos requeridos:\nâœ“ patente: Patente Ãºnica del vehÃ­culo\nâœ“ modelo: Modelo del camiÃ³n\nâœ“ capacidadPeso: Capacidad en kg\nâœ“ capacidadVolumen: Capacidad en mÂ³\nâœ“ disponible: true/false"
          },
          "response": []
        },
        {
          "name": "2. Listar Todos los Camiones",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/camiones",
              "host": ["{{gateway_url}}"],
              "path": ["camiones"]
            },
            "description": "âœ… VERIFICADO\nObtiene lista completa de camiones del sistema"
          },
          "response": []
        },
        {
          "name": "3. Listar Camiones Disponibles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/camiones/disponibles",
              "host": ["{{gateway_url}}"],
              "path": ["camiones", "disponibles"]
            },
            "description": "âœ… VERIFICADO\nObtiene solo los camiones disponibles para asignar"
          },
          "response": []
        },
        {
          "name": "4. Obtener CamiÃ³n por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/camiones/{{camion_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["camiones", "{{camion_id}}"]
            },
            "description": "âœ… VERIFICADO\nObtiene detalles de un camiÃ³n especÃ­fico"
          },
          "response": []
        },
        {
          "name": "5. Actualizar CamiÃ³n",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patente\": \"AB123CD\",\n  \"modelo\": \"Mercedes-Benz Actros 2651 - Actualizado\",\n  \"capacidadPeso\": 26000.0,\n  \"capacidadVolumen\": 85.0,\n  \"disponible\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/camiones/{{camion_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["camiones", "{{camion_id}}"]
            },
            "description": "âœ… VERIFICADO\nActualiza los datos de un camiÃ³n existente"
          },
          "response": []
        },
        {
          "name": "6. Eliminar CamiÃ³n",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/camiones/{{camion_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["camiones", "{{camion_id}}"]
            },
            "description": "âœ… VERIFICADO\nElimina un camiÃ³n del sistema (solo si no estÃ¡ en uso)"
          },
          "response": []
        }
      ],
      "description": "GestiÃ³n completa de camiones - Solo OPERADOR"
    },
    {
      "name": "ðŸ’° OPERADOR - GestiÃ³n de Tarifas",
      "item": [
        {
          "name": "1. Crear Tarifa",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('tarifa_id', jsonData.id);",
                  "    console.log('âœ“ Tarifa creada con ID: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Tarifa EstÃ¡ndar 2025\",\n  \"descripcion\": \"Tarifa base para transporte nacional\",\n  \"costoPorKm\": 150.0,\n  \"costoBaseCombustible\": 500.0,\n  \"costoEstadia\": 1000.0,\n  \"factorPeso\": 0.05,\n  \"factorVolumen\": 0.03,\n  \"activa\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/tarifas",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas"]
            },
            "description": "âœ… VERIFICADO\nCrea una nueva tarifa en el sistema.\n\nCampos requeridos:\nâœ“ nombre: Nombre descriptivo\nâœ“ descripcion: DescripciÃ³n de la tarifa\nâœ“ costoPorKm: Costo por kilÃ³metro (ARS)\nâœ“ costoBaseCombustible: Costo base de combustible (ARS)\nâœ“ costoEstadia: Costo por estadÃ­a en depÃ³sito (ARS)\nâœ“ factorPeso: Factor multiplicador por peso\nâœ“ factorVolumen: Factor multiplicador por volumen\nâœ“ activa: true/false"
          },
          "response": []
        },
        {
          "name": "2. Listar Todas las Tarifas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tarifas",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas"]
            },
            "description": "âœ… VERIFICADO\nObtiene lista completa de tarifas del sistema"
          },
          "response": []
        },
        {
          "name": "3. Listar Tarifas Activas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tarifas/activas",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas", "activas"]
            },
            "description": "âœ… VERIFICADO\nObtiene solo las tarifas activas (aplicables a cÃ¡lculos)"
          },
          "response": []
        },
        {
          "name": "4. Obtener Tarifa por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tarifas/{{tarifa_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas", "{{tarifa_id}}"]
            },
            "description": "âœ… VERIFICADO\nObtiene detalles de una tarifa especÃ­fica"
          },
          "response": []
        },
        {
          "name": "5. Actualizar Tarifa",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Tarifa EstÃ¡ndar 2025 - Actualizada\",\n  \"descripcion\": \"Tarifa base para transporte nacional con ajuste\",\n  \"costoPorKm\": 165.0,\n  \"costoBaseCombustible\": 550.0,\n  \"costoEstadia\": 1200.0,\n  \"factorPeso\": 0.06,\n  \"factorVolumen\": 0.035,\n  \"activa\": true\n}"
            },
            "url": {
              "raw": "{{gateway_url}}/tarifas/{{tarifa_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas", "{{tarifa_id}}"]
            },
            "description": "âœ… VERIFICADO\nActualiza los parÃ¡metros de una tarifa existente.\n\nPermite modificar todos los parÃ¡metros de tarifaciÃ³n:\nâœ“ Costos por kilÃ³metro\nâœ“ Costo de combustible\nâœ“ Costo de estadÃ­a\nâœ“ Factores de peso y volumen"
          },
          "response": []
        },
        {
          "name": "6. Desactivar Tarifa",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_operador}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tarifas/{{tarifa_id}}/desactivar",
              "host": ["{{gateway_url}}"],
              "path": ["tarifas", "{{tarifa_id}}", "desactivar"]
            },
            "description": "âœ… VERIFICADO\nDesactiva una tarifa (la marca como inactiva pero no la elimina).\n\nÃštil para:\nâœ“ Mantener historial de tarifas\nâœ“ Evitar usar tarifas obsoletas\nâœ“ AuditorÃ­a de cambios"
          },
          "response": []
        }
      ],
      "description": "GestiÃ³n completa de tarifas y parÃ¡metros de tarifaciÃ³n - Solo OPERADOR"
    },
    {
      "name": "ðŸšš TRANSPORTISTA - GestiÃ³n de Tramos",
      "item": [
        {
          "name": "1. Ver Mis Tramos Asignados",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ Tramos asignados: ' + jsonData.length);",
                  "    if (jsonData.length > 0) {",
                  "        pm.collectionVariables.set('mi_tramo_id', jsonData[0].id);",
                  "        console.log('âœ“ Primer tramo ID: ' + jsonData[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_transportista}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/transportista/transportista1",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "transportista", "transportista1"]
            },
            "description": "âœ… FUNCIONALIDAD TRANSPORTISTA\nObtiene todos los tramos asignados al transportista autenticado.\n\nMuestra para cada tramo:\nâœ“ ID del tramo\nâœ“ UbicaciÃ³n origen y destino\nâœ“ Coordenadas GPS\nâœ“ Distancia en km\nâœ“ Estado actual (PENDIENTE, ASIGNADO, EN_CURSO, COMPLETADO)\nâœ“ CamiÃ³n asignado\nâœ“ InformaciÃ³n del contenedor\nâœ“ Fechas de inicio y fin (si aplica)\n\nNOTA: Reemplazar 'transportista1' con el username del transportista autenticado"
          },
          "response": []
        },
        {
          "name": "2. Registrar Inicio de Tramo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ Tramo iniciado');",
                  "    console.log('âœ“ Estado: ' + jsonData.estado);",
                  "    console.log('âœ“ Fecha inicio: ' + jsonData.fechaInicio);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_transportista}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/{{tramo_id}}/iniciar",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "{{tramo_id}}", "iniciar"]
            },
            "description": "âœ… FUNCIONALIDAD TRANSPORTISTA\nRegistra el inicio de un tramo de transporte.\n\nValidaciones automÃ¡ticas:\nâœ“ Verifica que el tramo estÃ© en estado ASIGNADO\nâœ“ Verifica que el transportista autenticado sea el asignado al tramo\n\nEfectos:\nâœ“ Cambia el estado del tramo a: EN_CURSO\nâœ“ Registra la fecha y hora de inicio\nâœ“ Crea evento de tracking: RECOGIDO\nâœ“ Actualiza el estado del contenedor\n\nSolo el transportista asignado puede iniciar el tramo."
          },
          "response": []
        },
        {
          "name": "3. Registrar Fin de Tramo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log('âœ“ Tramo completado');",
                  "    console.log('âœ“ Estado: ' + jsonData.estado);",
                  "    console.log('âœ“ Fecha fin: ' + jsonData.fechaFin);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_transportista}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/{{tramo_id}}/finalizar",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "{{tramo_id}}", "finalizar"]
            },
            "description": "âœ… FUNCIONALIDAD TRANSPORTISTA\nRegistra la finalizaciÃ³n de un tramo de transporte.\n\nValidaciones automÃ¡ticas:\nâœ“ Verifica que el tramo estÃ© en estado EN_CURSO\nâœ“ Verifica que el transportista autenticado sea el asignado al tramo\nâœ“ Verifica que el tramo haya sido iniciado previamente\n\nEfectos:\nâœ“ Cambia el estado del tramo a: COMPLETADO\nâœ“ Registra la fecha y hora de finalizaciÃ³n\nâœ“ Crea evento de tracking: ENTREGADO (si es el Ãºltimo tramo)\nâœ“ Crea evento de tracking: EN_TRANSITO (si hay mÃ¡s tramos)\nâœ“ Actualiza el estado del contenedor\nâœ“ Si es el Ãºltimo tramo, cambia estado de solicitud a: COMPLETADA\n\nSolo el transportista asignado puede finalizar el tramo."
          },
          "response": []
        },
        {
          "name": "4. Ver Detalle de Mi Tramo",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_transportista}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/{{tramo_id}}",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "{{tramo_id}}"]
            },
            "description": "âœ… FUNCIONALIDAD TRANSPORTISTA\nObtiene los detalles completos de un tramo especÃ­fico.\n\nInformaciÃ³n incluida:\nâœ“ Datos del tramo (origen, destino, distancia)\nâœ“ Estado actual\nâœ“ CamiÃ³n asignado\nâœ“ InformaciÃ³n del contenedor\nâœ“ Fechas de inicio y fin\nâœ“ Coordenadas GPS de origen y destino\n\nEl transportista puede ver detalles de cualquier tramo asignado a Ã©l."
          },
          "response": []
        },
        {
          "name": "5. Ver Tramos por Estado",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token_transportista}}"
              }
            ],
            "url": {
              "raw": "{{gateway_url}}/tramos/transportista/transportista1?estado=ASIGNADO",
              "host": ["{{gateway_url}}"],
              "path": ["tramos", "transportista", "transportista1"],
              "query": [
                {
                  "key": "estado",
                  "value": "ASIGNADO",
                  "description": "Estados vÃ¡lidos: PENDIENTE, ASIGNADO, EN_CURSO, COMPLETADO"
                }
              ]
            },
            "description": "âœ… FUNCIONALIDAD TRANSPORTISTA\nFiltra los tramos del transportista por estado especÃ­fico.\n\nEstados disponibles:\nâœ“ PENDIENTE: Tramo creado pero sin camiÃ³n asignado\nâœ“ ASIGNADO: CamiÃ³n asignado, listo para iniciar\nâœ“ EN_CURSO: Tramo en ejecuciÃ³n\nâœ“ COMPLETADO: Tramo finalizado\n\nÃštil para:\n- Ver tramos pendientes de iniciar (ASIGNADO)\n- Ver tramos en progreso (EN_CURSO)\n- Ver historial de tramos completados (COMPLETADO)\n\nNOTA: Reemplazar 'transportista1' con el username del transportista autenticado"
          },
          "response": []
        }
      ],
      "description": "Funcionalidades completas del rol TRANSPORTISTA - GestiÃ³n de tramos asignados"
    }
  ],
  "variable": [
    {
      "key": "gateway_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "keycloak_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "token_cliente",
      "value": "",
      "type": "string"
    },
    {
      "key": "token_operador",
      "value": "",
      "type": "string"
    },
    {
      "key": "token_transportista",
      "value": "",
      "type": "string"
    },
    {
      "key": "cliente_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "solicitud_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "contenedor_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "numero_solicitud",
      "value": "",
      "type": "string"
    },
    {
      "key": "ruta_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "ruta_tentativa",
      "value": "",
      "type": "string"
    },
    {
      "key": "tramo_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "deposito_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "camion_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "tarifa_id",
      "value": "",
      "type": "string"
    }
  ]
}
